{% extends 'base.html' %}
{% block title %}Liste Membres{% endblock %}
{% block content %}
<h2>Liste des Membres</h2>

<div class="flash-messages">
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for msg in messages %}
                <p style="color: {% if 'Erreur' in msg %}#F87171{% else %}#4ADE80{% endif %};">{{ msg }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>

<table>
    <thead>
        <tr>
            <th>#</th>
            <th>Nom</th>
            <th>Postnom</th>
            <th>Date Naissance</th>
            <th>Adresse</th>
            <th>Téléphone</th>
            <th>Section</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for m in membres %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ m.nom }}</td>
            <td>{{ m.postnom }}</td>
            <td>{{ m.date_naissance.strftime('%d/%m/%Y') }}</td>
            <td>{{ m.adresse }}</td>
            <td>{{ m.telephone }}</td>
            <td>{{ m.section }}</td>
            <td>
                <a href="{{ url_for('modifier_membre', membre_id=m.id) }}" class="action-link">Modifier</a>
                <a href="#" class="action-link" onclick="confirmDelete({{ m.id }})">Supprimer</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<style>
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
th, td {
    padding: 12px;
    border: 1px solid #333;
    text-align: left;
}
th {
    background-color: #272727;
    color: #4ADE80;
}
tr:nth-child(even) {
    background-color: #1A1A1A;
}
tr:hover {
    background-color: #333;
}
.action-link {
    color: #4ADE80;
    text-decoration: none;
    margin-right: 10px;
}
.action-link:hover {
    text-decoration: underline;
}
</style>

<script>
function confirmDelete(membreId) {
    if (confirm("Êtes-vous sûr de vouloir supprimer ce membre ?")) {
        window.location.href = "/supprimer_membre/" + membreId;
    }
}
</script>
{% endblock %}
