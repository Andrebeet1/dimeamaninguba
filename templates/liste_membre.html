{% extends 'base.html' %}
{% block title %}Liste Membres{% endblock %}

{% block content %}
<h2>Liste des Membres</h2>

<div class="flash-messages">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, msg in messages %}
                <p class="flash {{ category }}">{{ msg }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>

<table class="membre-table">
    <thead>
        <tr>
            <th>#</th>
            <th>Nom</th>
            <th>Postnom</th>
            <th>Date Naissance</th>
            <th>Adresse</th>
            <th>Téléphone</th>
            <th>Section</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for m in membres %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ m.nom }}</td>
            <td>{{ m.postnom }}</td>
            <td>{{ m.date_naissance.strftime('%d/%m/%Y') }}</td>
            <td>{{ m.adresse }}</td>
            <td>{{ m.telephone }}</td>
            <td>{{ m.section }}</td>
            <td>
                <a href="{{ url_for('modifier_membre', membre_id=m.id) }}" class="action-link modify">Modifier</a>
                <form action="{{ url_for('supprimer_membre', membre_id=m.id) }}" method="POST" class="delete-form">
                    <button type="submit" class="action-link delete" onclick="return confirmDelete();">Supprimer</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<style>
/* Flash messages */
.flash.success { color: #4ADE80; }
.flash.danger { color: #F87171; }

/* Table */
.membre-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
.membre-table th, .membre-table td {
    padding: 12px;
    border: 1px solid #333;
    text-align: left;
}
.membre-table th {
    background-color: #272727;
    color: #4ADE80;
}
.membre-table tr:nth-child(even) { background-color: #1A1A1A; }
.membre-table tr:hover { background-color: #333; }

/* Action links */
.action-link {
    text-decoration: none;
    margin-right: 10px;
    font-weight: bold;
    cursor: pointer;
}
.action-link.modify { color: #60A5FA; }
.action-link.delete { color: #F87171; background:none;border:none;padding:0; }

/* Form inline */
.delete-form { display: inline; }
</style>

<script>
function confirmDelete() {
    return confirm('Êtes-vous sûr de vouloir supprimer ce membre ? Cette action est irréversible.');
}
</script>

{% endblock %}
